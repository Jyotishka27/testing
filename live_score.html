<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Results - We Are Eleven</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
           background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
           color: #1e293b; }
    .section-header { background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border: 1px solid #e2e8f0; }
    .fixture-card { background: linear-gradient(145deg, #ffffff 0%, #f9fafb 100%);
                    border: 1px solid #e5e7eb; transition: all 0.2s ease; }
    .fixture-card:hover { border-color: #d1d5db; transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.15); }
    .final-card { background: linear-gradient(145deg, #fffbeb 0%, #fef3c7 100%); border: 2px solid #fbbf24; position: relative; }
    .final-card::before { content: 'ðŸ‘‘'; position: absolute; top: -10px; right: -10px; font-size: 1.5rem;
                          background: #fbbf24; border-radius: 50%; width: 40px; height: 40px; display: flex;
                          align-items: center; justify-content: center; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }

    /* === Alignment fixes === */
    /* Header row: home | score | away, with centered score */
    .match-title{
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: .75rem;
    }
    /* Left team */
    .match-title > span:first-child{
      justify-self: start;
      text-align: left;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      font-weight: 600;
    }
    /* Right team */
    .match-title > span:last-child{
      justify-self: end;
      text-align: right;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      font-weight: 600;
    }
    /* Score pill */
    .match-score{
      display: flex;
      align-items: center;
      justify-content: center;
      height: 2.5rem;
      min-width: 3.5rem;
      padding: 0 .5rem;
      border-radius: 9999px;
    }
    .match-score.wide { min-width: 4.25rem; }

    /* Scorers columns align from top & consistent rhythm */
    .match-card .grid{ align-items: start; }
    .match-card .grid .font-medium{ line-height: 1rem; }
    .match-card ul{ margin-top: .25rem; }
    .match-card ul li{ line-height: 1.2rem; }

    /* Penalties note centered */
    .match-note { font-size: .75rem; color: #6b7280; margin-top: .5rem; text-align: center; }

    /* Optional: consistent inner spacing */
    .fixture-card{ padding-top: 1.25rem; padding-bottom: 1.25rem; }

    .leader-card { background: linear-gradient(145deg, #ffffff 0%, #f8fafb 100%); border: 1px solid #e2e8f0; }
  </style>
</head>
<body class="flex flex-col min-h-screen">

  <!-- Header -->
  <div id="site-header"></div>

  <main class="flex-grow max-w-7xl mx-auto p-6 space-y-12">

    <!-- Knockout Results -->
    <section class="section-header rounded-2xl shadow-lg p-8" data-stage="knockout">
      <h2 class="text-4xl font-bold text-center mb-6">Knockout Stage Results</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

        <!-- KO 1 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Thunderbolt</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">1â€“3</div>
            <span>Messiah FC</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorer</div><ul><li>Tintin</li></ul></div>
            <div>
              <div class="font-medium text-gray-600 mb-1">Scorers</div>
              <ul>
                <li>Rishov (Ritam)</li>
                <li>Biswajit</li>
                <li>Rishov (Satyaki)</li>
              </ul>
            </div>
          </div>
        </div>      
        
        <!-- KO 2 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Amigos FC</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">0â€“1</div>
            <span>Strawhat Pirates</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorer</div><ul><li>Supratim</li></ul></div>
          </div>
        </div>

        <!-- KO 3 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>White Panthers</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">0â€“1</div>
            <span>Thunderbolt</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorer</div><ul><li>Tintin (Akash)</li></ul></div>
          </div>
        </div>

        <!-- KO 4 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Red Bulls Eleven</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">0â€“1</div>
            <span>Amigos FC</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorer</div><ul><li>Vasu (Krishnendu)</li></ul></div>
          </div>
        </div>
        
        <!-- KO 5 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Messiah FC</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">1â€“1</div>
            <span>White Panthers</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorer</div><ul><li>Biswajit (Ritam)</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorer</div><ul><li>Soumik (Subhanjan)</li></ul></div>
          </div>
        </div>
        
        <!-- KO 6 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Strawhat Pirates</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">2â€“2</div>
            <span>Red Bulls Eleven</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div>
              <div class="font-medium text-gray-600 mb-1">Scorers</div>
              <ul>
                <li>Monty (Supratim)</li>
                <li>Monty</li>
              </ul>
            </div>
            <div>
              <div class="font-medium text-gray-600 mb-1">Scorers</div>
              <ul>
                <li>Siva</li>
                <li>Jeff</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- KO 7 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Messiah FC</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">0â€“0</div>
            <span>Thunderbolt</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
          </div>
        </div>

        <!-- KO 8 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Strawhat Pirates</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">0â€“0</div>
            <span>Amigos FC</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
          </div>
        </div>

        <!-- KO 9 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Thunderbolt</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">0â€“1</div>
            <span>White Panthers</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>Pulak (Subhanjan)</li></ul></div>
          </div>
        </div>

        <!-- KO 10 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Amigos FC</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">2â€“0</div>
            <span>Red Bulls Eleven</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div>
              <div class="font-medium text-gray-600 mb-1">Scorers</div>
              <ul>
                <li>Kaustav (Vasu)</li>
                <li>Sany (Kaustav)</li>
              </ul>
            </div>
            <div>
              <div class="font-medium text-gray-600 mb-1">Scorers</div>
              <ul><li>â€”</li></ul>
            </div>
          </div>
        </div>

        <!-- KO 11 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>White Panthers</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">0â€“0</div>
            <span>Messiah FC</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
          </div>
        </div>

        <!-- KO 12 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Red Bulls Eleven</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">2â€“2</div>
            <span>Strawhat Pirates</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div>
              <div class="font-medium text-gray-600 mb-1">Scorers</div>
              <ul>
                <li>Jeff</li>
                <li>Subhojit (Akash M)</li>
              </ul>
            </div>
            <div>
              <div class="font-medium text-gray-600 mb-1">Scorers</div>
              <ul>
                <li>Monty (Supratim)</li>
                <li>Dibba</li>
              </ul>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- Semi Finals -->
    <section class="section-header rounded-2xl shadow-lg p-8" data-stage="semi">
      <h2 class="text-3xl font-bold text-center mb-8">Semi-finals</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <!-- SF1 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Messiah FC</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">0â€“0</div>
            <span>Strawhat Pirates</span>
          </div>
          <div class="match-note">Penalties: 1â€“3 (decided on penalties)</div>
          <!-- No scorers -->
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
          </div>
        </div>

        <!-- SF2 -->
        <div class="fixture-card rounded-xl shadow-md p-6 match-card">
          <div class="match-title">
            <span>Amigos FC</span>
            <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">3â€“0</div>
            <span>White Panthers</span>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
            <div>
              <div class="font-medium text-gray-600 mb-1">Scorers</div>
              <ul>
                <li>Vasu (Kaustav)</li>
                <li>Sany</li>
                <li>Vasu</li>
              </ul>
            </div>
            <div><div class="font-medium text-gray-600 mb-1">Scorers</div><ul><li>â€”</li></ul></div>
          </div>
        </div>

      </div>
    </section>

    <!-- Third Place -->
    <section class="section-header rounded-2xl shadow-lg p-8" data-stage="third">
      <h2 class="text-3xl font-bold text-center mb-8">Third Place Playoff</h2>
      <div class="fixture-card rounded-xl shadow-md p-6 match-card">
        <div class="match-title">
          <span>Messiah FC</span>
          <div class="match-score flex items-center justify-center bg-gray-900 text-white font-bold rounded-full">4â€“1</div>
          <span>White Panthers</span>
        </div>
        <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
          <div>
            <div class="font-medium text-gray-600 mb-1">Scorers</div>
            <ul>
              <li>Rishov (Ritam)</li>
              <li>Ritam</li>
              <li>Ritam (Satyaki)</li>
              <li>Ritam</li>
            </ul>
          </div>
          <div>
            <div class="font-medium text-gray-600 mb-1">Scorer</div>
            <ul><li>Soumik</li></ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Final -->
    <section class="section-header rounded-2xl shadow-lg p-8" data-stage="final">
      <h2 class="text-3xl font-bold text-center mb-8">Final</h2>
      <div class="fixture-card rounded-xl shadow-md p-6 final-card match-card">
        <div class="match-title">
          <span>Strawhat Pirates</span>
          <div class="match-score wide flex items-center justify-center bg-amber-700 text-white font-extrabold rounded-full">1â€“2</div>
          <span>Amigos FC</span>
        </div>
        <div class="grid grid-cols-2 gap-4 mt-4 text-sm">
          <div>
            <div class="font-medium text-gray-700 mb-1">Scorer</div>
            <ul><li>Supratim (Monty)</li></ul>
          </div>
          <div>
            <div class="font-medium text-gray-700 mb-1">Scorers</div>
            <ul>
              <li>Rony (Rahul)</li>
              <li>Sany</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- ================== LEADERBOARDS (auto-computed) ================== -->
    <section class="section-header rounded-2xl shadow-lg p-8">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold text-gray-900">Leaderboards</h2>
        <p class="text-gray-600">Computed from Knockout + Semi-finals + Third Place + Final</p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Top Scorers -->
        <div class="leader-card rounded-2xl p-6 shadow-md">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold text-gray-800">Top Scorers</h3>
            <span class="px-3 py-1 rounded-full text-white text-sm font-semibold" style="background:linear-gradient(135deg,#3b82f6 0%,#1d4ed8 100%);">Goals</span>
          </div>
          <ol id="scorers-list" class="space-y-2 text-sm"></ol>
        </div>

        <!-- Top Assists -->
        <div class="leader-card rounded-2xl p-6 shadow-md">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold text-gray-800">Top Assists</h3>
            <span class="px-3 py-1 rounded-full text-white text-sm font-semibold" style="background:linear-gradient(135deg,#10b981 0%,#047857 100%);">Assists</span>
          </div>
          <ol id="assists-list" class="space-y-2 text-sm"></ol>
        </div>
      </div>

      <p class="text-xs text-gray-500 mt-6">
        Ties are ordered alphabetically by player name. Totals exclude penalty shoot-outs.
      </p>
    </section>

  </main>

  <!-- Footer -->
  <footer class="bg-gray-950 py-8 text-center text-gray-400 mt-12">
    <p class="text-lg">Â© 2025 Football Community. All Rights Reserved.</p>
    <p class="text-sm mt-2 opacity-75">Bringing together the best in football competition</p>
  </footer>

  <!-- Header injection -->
  <script type="module">
    import { injectHeader } from "./tournament_header.js";
    injectHeader("#site-header", { active: "results" });
  </script>

  <!-- ===== Leaderboards Logic: parse DOM and compute ===== -->
  <script>
    // Utility: clean text & split "Scorer (Assistant)" pattern
    function parseEntry(text) {
      const t = text.trim();
      if (!t || t === 'â€”' || /^no scorers$/i.test(t)) return null;
      // Accept forms: "Player", "Player (Assist)", "Player (Assist1, Assist2)"
      const m = t.match(/^(.+?)(?:\s*\((.+)\))?$/);
      if (!m) return null;
      const player = m[1].trim();
      const assists = (m[2] || '')
        .split(',')
        .map(s => s.trim())
        .filter(Boolean);
      return { player, assists };
    }

    function tallyFromStage(stageSelector) {
      const goals = new Map();
      const assists = new Map();

      document.querySelectorAll(`${stageSelector} .match-card`).forEach(card => {
        // For each match, find all <li> under the card
        const lis = card.querySelectorAll('ul li');
        lis.forEach(li => {
          const parsed = parseEntry(li.textContent || '');
          if (!parsed) return;
          // Goal for the player
          goals.set(parsed.player, (goals.get(parsed.player) || 0) + 1);
          // Assists for anyone inside parentheses
          parsed.assists.forEach(a => {
            assists.set(a, (assists.get(a) || 0) + 1);
          });
        });
      });

      return { goals, assists };
    }

    function mergeTallies(base, add) {
      add.goals.forEach((v, k) => base.goals.set(k, (base.goals.get(k) || 0) + v));
      add.assists.forEach((v, k) => base.assists.set(k, (base.assists.get(k) || 0) + v));
      return base;
    }

    function toSortedArray(map, desc = true) {
      const arr = Array.from(map.entries());
      arr.sort((a, b) => {
        if (b[1] !== a[1]) return desc ? b[1] - a[1] : a[1] - b[1];
        return a[0].localeCompare(b[0]); // tie-break alphabetically
      });
      return arr;
    }

    // Compute from all stages
    (function computeLeaderboards() {
      const total = { goals: new Map(), assists: new Map() };
      ['[data-stage="knockout"]','[data-stage="semi"]','[data-stage="third"]','[data-stage="final"]']
        .map(s => tallyFromStage(s))
        .forEach(t => mergeTallies(total, t));

      const topScorers = toSortedArray(total.goals);
      const topAssists = toSortedArray(total.assists);

      renderList('scorers-list', topScorers);
      renderList('assists-list', topAssists);
    })();
  </script>

<script type="module" data-autoset-tournament>
  import { getCurrentTournament } from './header.js';
  const sel = document.querySelector('select');
  const t = getCurrentTournament();
  if (sel && t) {
    sel.innerHTML = `<option value="${t.slug}" selected>${t.name}</option>`;
  }
</script>

</body>
</html>
